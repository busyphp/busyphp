var autoComplete=(function(){function a(n){if(!document.querySelector){return}function h(k,i){return k.classList?k.classList.contains(i):new RegExp("\\b"+i+"\\b").test(k.className)}function f(o,k,i){if(o.attachEvent){o.attachEvent("on"+k,i)}else{o.addEventListener(k,i)}}function m(o,k,i){if(o.detachEvent){o.detachEvent("on"+k,i)}else{o.removeEventListener(k,i)}}function d(p,o,i,k){f(k||document,o,function(s){var r,q=s.target||s.srcElement;while(q&&!(r=h(q,p))){q=q.parentElement}if(r){i.call(q,s)}})}var c={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",container:document.body,renderItem:function(o,i){i=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var k=new RegExp("("+i.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+o+'">'+o.replace(k,"<b>$1</b>")+"</div>"},onSelect:function(o,i,k){}};for(var e in n){if(n.hasOwnProperty(e)){c[e]=n[e]}}var b=typeof c.selector=="object"?[c.selector]:document.querySelectorAll(c.selector);for(var g=0;g<b.length;g++){var l=b[g];l.sc=document.createElement("div");l.sc.className="autocomplete-suggestions "+c.menuClass;l.autocompleteAttr=l.getAttribute("autocomplete");l.setAttribute("autocomplete","off");l.cache={};l.last_val="";l.updateSC=function(k,o){var p=l.getBoundingClientRect();var s,r;if(c.container==document.body){s=(window.pageXOffset||document.documentElement.scrollLeft);r=(window.pageYOffset||document.documentElement.scrollTop)}else{s=c.container.offsetLeft;r=c.container.offsetTop}l.sc.style.left=Math.round(p.left+s+c.offsetLeft)+"px";l.sc.style.top=Math.round(p.bottom+r+c.offsetTop)+"px";l.sc.style.width=Math.round(p.right-p.left)+"px";if(!k){l.sc.style.display="block";if(!l.sc.maxHeight){l.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(l.sc,null):l.sc.currentStyle).maxHeight)}if(!l.sc.suggestionHeight){l.sc.suggestionHeight=l.sc.querySelector(".autocomplete-suggestion").offsetHeight}if(l.sc.suggestionHeight){if(!o){l.sc.scrollTop=0}else{var i=l.sc.scrollTop,q=o.getBoundingClientRect().top-l.sc.getBoundingClientRect().top;if(q+l.sc.suggestionHeight-l.sc.maxHeight>0){l.sc.scrollTop=q+l.sc.suggestionHeight+i-l.sc.maxHeight}else{if(q<0){l.sc.scrollTop=q+i}}}}}};f(window,"resize",l.updateSC);c.container.appendChild(l.sc);d("autocomplete-suggestion","mouseleave",function(k){var i=l.sc.querySelector(".autocomplete-suggestion.selected");if(i){setTimeout(function(){i.className=i.className.replace("selected","")},20)}},l.sc);d("autocomplete-suggestion","mouseover",function(k){var i=l.sc.querySelector(".autocomplete-suggestion.selected");if(i){i.className=i.className.replace("selected","")}this.className+=" selected"},l.sc);$(l.sc).on("click",".autocomplete-suggestion",function(k){var i=this.getAttribute("data-val");l.value=i;c.onSelect(k,i,this);l.sc.style.display="none"});l.blurHandler=function(){try{var i=document.querySelector(".autocomplete-suggestions:hover")}catch(k){var i=0}if(!i){l.last_val=l.value;l.sc.style.display="none";setTimeout(function(){l.sc.style.display="none"},350)}else{if(l!==document.activeElement){setTimeout(function(){l.focus()},20)}}};f(l,"blur",l.blurHandler);var j=function(p){var q=l.value;l.cache[q]=p;if(p.length&&q.length>=c.minChars){var o="";for(var k=0;k<p.length;k++){o+=c.renderItem(p[k],q)}l.sc.innerHTML=o;l.updateSC(0)}else{l.sc.style.display="none"}};l.keydownHandler=function(p){var i=window.event?p.keyCode:p.which;if((i==40||i==38)&&l.sc.innerHTML){var k,o=l.sc.querySelector(".autocomplete-suggestion.selected");if(!o){k=(i==40)?l.sc.querySelector(".autocomplete-suggestion"):l.sc.childNodes[l.sc.childNodes.length-1];k.className+=" selected";l.value=k.getAttribute("data-val")}else{k=(i==40)?o.nextSibling:o.previousSibling;if(k){o.className=o.className.replace("selected","");k.className+=" selected";l.value=k.getAttribute("data-val")}else{o.className=o.className.replace("selected","");l.value=l.last_val;k=0}}l.updateSC(0,k);return false}else{if(i==27){l.value=l.last_val;l.sc.style.display="none"}else{if(i==13||i==9){var o=l.sc.querySelector(".autocomplete-suggestion.selected");if(o&&l.sc.style.display!="none"){c.onSelect(p,o.getAttribute("data-val"),o);setTimeout(function(){l.sc.style.display="none"},20)}}}}};f(l,"keydown",l.keydownHandler);l.keyupHandler=function(q){var p=window.event?q.keyCode:q.which;if(!p||(p<35||p>40)&&p!=13&&p!=27){var r=l.value;if(r.length>=c.minChars){if(r!=l.last_val){l.last_val=r;clearTimeout(l.timer);if(c.cache){if(r in l.cache){j(l.cache[r]);return}for(var o=1;o<r.length-c.minChars;o++){var k=r.slice(0,r.length-o);if(k in l.cache&&!l.cache[k].length){j([]);return}}}l.timer=setTimeout(function(){c.source(r,j)},c.delay)}}else{l.last_val=r;l.sc.style.display="none"}}};f(l,"keyup",l.keyupHandler);l.focusHandler=function(i){l.last_val="\n";l.keyupHandler(i)};if(!c.minChars){f(l,"focus",l.focusHandler)}}this.destroy=function(){for(var k=0;k<b.length;k++){var o=b[k];m(window,"resize",o.updateSC);m(o,"blur",o.blurHandler);m(o,"focus",o.focusHandler);m(o,"keydown",o.keydownHandler);m(o,"keyup",o.keyupHandler);if(o.autocompleteAttr){o.setAttribute("autocomplete",o.autocompleteAttr)}else{o.removeAttribute("autocomplete")}c.container.removeChild(o.sc);o=null}}}return a})();(function(){if(typeof define==="function"&&define.amd){define("autoComplete",function(){return autoComplete})}else{if(typeof module!=="undefined"&&module.exports){module.exports=autoComplete}else{window.autoComplete=autoComplete}}})();