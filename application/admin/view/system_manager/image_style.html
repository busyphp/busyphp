<extend name="@admin:layout"/>
<block name="content">
    <div class="panel panel-default">
        <include file="system_manager/nav"/>
        <div class="panel-body">
            <ul class="nav nav-pills">
                <foreach name="disks" item="vo">
                    <li class="{$vo.type == $disk ? 'active' : ''}">
                        <a href="{:url('?disk=' . $vo['type'])}">{$vo.name}</a>
                    </li>
                </foreach>
            </ul>
            <div class="space"></div>
            <table class="table table-hover table-bordered"
                   data-toggle="busy-table"
                   data-toolbar="#image_style_toolbar"
                   data-pagination="false"
                   data-show-refresh="true"
                   data-url="__SELF__">
                <thead>
                    <tr>
                        <th class="text-center" width="40" data-checkbox="true"></th>
                        <th data-field="id" data-align="center" width="100" data-formatter="@">样式名</th>
                        <th data-field="rule" data-halign="center" data-align="left" data-formatter="@">样式</th>
                        <th data-field="operate" data-align="center" data-formatter="@" width="100">操作</th>
                    </tr>
                </thead>
            </table>

            <div class="hide">
                <div id="image_style_toolbar">
                    <ba:access value="image_style_add">
                        <a class="btn btn-success"
                           data-toggle="busy-modal"
                           data-url="{:url('image_style_add?disk='. $disk)}"
                           data-ok="添加图片样式"
                           data-size="lg"
                           data-form-on-success="@table.reload">
                            <i class="fa fa-plus"></i>
                            添加
                        </a>
                    </ba:access>

                    <ba:access value="image_style_delete">
                        <a class="btn btn-danger"
                           data-url="{:url('image_style_delete?disk='. $disk)}"
                           data-confirm="确认要删除选中的%s个图片样式吗？"
                           data-checked="true"
                           data-disabled="true"
                           data-method="post"
                           data-on-success="@table.reload">
                            <i class="fa fa-trash"></i>
                            删除
                        </a>
                    </ba:access>
                </div>
            </div>

            <script id="id" type="text/html">
                <span class="badge badge-primary">{{value}}</span>
            </script>

            <script id="rule" type="text/html">
                <div class="text-wrap">{{value}}</div>
            </script>

            <script id="operate" type="text/html">
                <a class="btn btn-default btn-xs"
                   target="_blank"
                   href="{:url('image_style_preview?disk='. $disk .'&id=')}{{item.id}}">预览</a>

                <ba:access value="image_style_edit">
                    <a class="btn btn-success btn-xs"
                       href="{:url('image_style_edit?disk='. $disk .'&id=')}{{item.id}}"
                       data-toggle="busy-modal"
                       data-size="lg"
                       data-ok="修改图片样式"
                       data-form-on-success="@table.reload"><i class="fa fa-pencil"></i></a>
                </ba:access>
                <ba:access value="image_style_delete">
                    <a class="btn btn-danger btn-xs"
                       href="{:url('image_style_delete?disk='. $disk .'&id=')}{{item.id}}"
                       data-toggle="busy-request"
                       data-confirm="确认要删除该图片样式吗？"
                       data-on-success="@table.reload"><i class="fa fa-trash"></i></a>
                </ba:access>
            </script>

            <div class="space-15"></div>
            <div class="text-gray">
                说明：创建合理的 <span class="badge">图片样式</span> 可以有效的节省 <span class="badge">服务器存储空间</span> 及
                <span class="badge">带宽</span>
            </div>
        </div>
    </div>
</block>